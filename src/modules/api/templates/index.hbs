import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';

import { prepareHeaders, paramsSerializer, enhanceEndpoints } from './extension';

{{#each imports}}
import type * as {{this.name}} from './{{this.path}}';
{{/each}}

export const api = createApi({
    reducerPath: 'api/{{reducerPath}}',
    baseQuery  : fetchBaseQuery({
        baseUrl: '{{baseUrl}}',
        headers: { 'cache-control': 'no-cache' },
        prepareHeaders,
        paramsSerializer
    }),
    endpoints  : (build) => ({
        {{#each endpoints}}{{{this}}},{{/each}}
    })
});

const enhanceApi = enhanceEndpoints(api);

export default enhanceApi;
